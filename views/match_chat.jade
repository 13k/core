extend match
  
block match_content
  .row
    .col-md-8
      h2 Chat
      .col-md-6
        h4: abbr(title="An estimation of how \"positive\" all chat was.", style="display:inline-block") Positivity 
          small (#{match.sentiment.score} net score, #{match.sentiment.tokens.length} tokens)
        .progress
          - var pct = (match.sentiment.comparative+1)/2
          .progress-bar(class=pct>0.5 ? "progress-bar-success" : "progress-bar-danger", style="width:#{pct*100}%")  #{match.sentiment.comparative.toFixed(2)}
      .col-md-3
        h4 <i class="fa fa-smile-o"></i>
        //p: pre=JSON.stringify(match.sentiment, null, 2)
        p: pre=JSON.stringify(match.sentiment.positive, null, 2)
      .col-md-3
        h4 <i class="fa fa-frown-o"></i>
        p: pre=JSON.stringify(match.sentiment.negative, null, 2)

      table.table.table-hover.table-responsive.match-top
        thead
          tr
            th Hero
            th Time
            th Message
        tbody
          each message in match.chat
            - var p = match.players[message.slot] || {}
            - var hero = constants.heroes[p.hero_id]
            - var slot_color = constants.player_colors[p.player_slot]
            tr(class=p.isRadiant ? "success" : "danger")
              if hero
                td: img(src=hero.img, title=hero.localized_name, style="border-left-color:#{slot_color}").player-color
              else
                td
                  .player-color(style="border-left-color:#{slot_color}")=message.slot
              td.format-seconds(data-format-seconds=message.time)=message.time
              td=message.key
    .col-md-4
      include ads/skyscraper
    
append footer_assets