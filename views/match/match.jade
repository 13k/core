extend /layout
include /mixins/hero_td
include /mixins/data_table
include /mixins/data_table_header

append head
    meta(property="og:title", content="Match #{match.match_id}")
    | <!-- This page generated at #{moment(Date.now()).format('MMMM Do YYYY, h:mm:ss a')} -->

block header
  .mdl-layout__header-row
    span.mdl-layout-title Match #{match.match_id} 
  .mdl-layout__tab-bar.mdl-js-ripple-effect
    each val, key in tabs
      - var disableTab = false && !match.parsed_data.version && key!=="index"
      a.mdl-layout__tab(href="/matches/#{match.match_id}/" + (key == 'index' ? "" : key), class=(route === key ? 'is-active' : ''), disabled=disableTab, title=(disableTab ? 'This data will be available when the replay is parsed.' : ''))= val.name  

  script.
    $('a.mdl-layout__tab').click(function(){
      console.log("called")
      console.log($(this).attr("href"));
      window.location.href = $(this).attr("href");
    });
block content
  .mdl-cell.mdl-cell--12-col
    .text-center
      h3.inline(class=match.radiant_win ? "radiant" : "dire")= match.radiant_win ? "Radiant Victory" : "Dire Victory"
      small
        | Mode: #{constants.game_mode[match.game_mode] ? constants.game_mode[match.game_mode].name : match.game_mode} | 
        | Region: #{constants.cluster[match.cluster] ? constants.cluster[match.cluster] : match.cluster} |
        | Duration: #{moment().startOf('day').seconds(match.duration).format("H:mm:ss")} | 
        | Ended: #[abbr(title=moment.unix(match.start_time+match.duration).format("ddd D MMMM YYYY, hh:mm:ss")) #{moment.unix(match.start_time + match.duration).fromNow()}]
        | #{match.skill? "| Skill: " + constants.skill[match.skill] ? constants.skill[match.skill] : match.skill : ""}
      .addthis_sharing_toolbox
  block match_content

append footer_assets
  script(type="text/javascript", src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5452f1e51eac0fc5", async="async")
