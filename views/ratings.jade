extend layout

block content
  //pre=JSON.stringify(ratings)
  h1 Ratings
  table.table#ratings
    thead
      tr
        th Rank
        th Name
        th Solo
        th Party
        //th Updated
    each rating, i in ratings
      tr
        td
        td
          img.user(src=rating.avatar)
          a(href='/players/#{rating.account_id}')=rating.personaname || rating.account_id
        td= rating.soloCompetitiveRank
        td= rating.competitiveRank
        //td= moment(rating.time).format('X')

append footer_assets
  script.
    var t = $("#ratings").DataTable({order:[2, "desc"],
          "columnDefs": [ {
            "searchable": false,
            "orderable": false,
            "targets": 0
        } ]});
        t.on( 'order.dt search.dt', function () {
        t.column(0, {search:'applied', order:'applied'}).nodes().each( function (cell, i) {
            cell.innerHTML = i+1;
        } );
    } ).draw();
